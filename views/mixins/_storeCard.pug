mixin storeCard(store = {})

    .mv3.shadow-4.w-30
        .store__hero.tr.pa3.relative
            .z-2.relative.flex.white.mb5.items-center.justify-around
                if user
                    .store__action
                        form.heart(action=`/api/stores/${store._id}/heart` method='POST')
                            - const heartStrings = user.hearts && user.hearts.map(obj => obj.toString() )
                            - const heartClass = heartStrings && heartStrings.includes(store._id.toString()) ? 'heart__button--hearted' : ''
                            button.heart__button(type='submit' name='heart', class=heartClass)
                                != h.icon('heart')
                if user && store.author.equals(user._id)
                    .store__action
                        a(href=`stores/${store._id}/edit`)
                            != h.icon('pencil')
                if store.reviews
                    .store__action
                        != h.icon('review')
                        span= store.reviews.length
            img.w-100.h-100.absolute.top-0.left-0.right-0(src=`/uploads/${store.photo || 'store.png'}`)
            h2.title.z-2.ma0.relative.f2
                a.link.black.pt1(href=`/store/${store.slug}`) #{store.name.toUpperCase()}
        .pa3
            - const text = store.description.split(' ')
            p.f5.ma0.di= text.slice(0, 25).join(' ')
            span.f5= store.description.split(' ').length > 25 ? '...' : ''